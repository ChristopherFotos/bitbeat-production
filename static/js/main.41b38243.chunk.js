(this.webpackJsonpbitbeat=this.webpackJsonpbitbeat||[]).push([[0],{37:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var s=a(12),n=a(16),r=a.n(n),c=a(30),l=a.n(c),i=a(20),o=a(14),u=a(7),m=a(1),h=a(2),p=a(8),d=a(3),b=a(4),j=a(43),f=a(21),v=a(15),g=(a(44),a(27)),O=a.n(g);function y(e){var t=Object(n.useState)(),a=Object(v.a)(t,2),r=a[0],c=a[1],l=Object(n.useContext)(V);return Object(s.jsx)(O.a,{children:Object(s.jsx)("div",{onClick:function(){c(!r),e.flip(e.layerKey,e.index)},className:"beat ".concat(r?"beat--active":"").concat(l.step===e.index?"beat--playing":"")})})}a(61);function x(e){return Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("span",{className:"row__key",children:e.tone}),e.layer.map((function(t,a){return Object(s.jsx)(y,{flip:e.placeBeat,layerKey:e.tone,index:a})}))]})}a(62);var C={Reverb:[{name:"decay",label:"decay",range:[.001,10],normalize:0,default:10},{name:"wet",label:"wet",range:[1,10],normalize:1,default:1}],FeedbackDelay:[{name:"feedback",label:"feedback",range:[1,10],normalize:1,default:.1},{name:"delayTime",label:"delay time",range:[1,3],normalize:2,default:1}],Distortion:[{name:"distortion",label:"distortion",range:[1,10],normalize:1,default:1}],JCReverb:[{name:"roomSize",label:"room size",range:[1,10],normalize:1,default:5},{name:"wet",label:"wet",range:[1,10],normalize:1,default:5}],Vibrato:[{name:"depth",label:"depth",range:[1,10],normalize:1,default:1},{name:"frequency",label:"frequency",range:[1,10],normalize:1,default:1},{name:"wet",label:"wet",range:[1,10],normalize:1,default:5}],EQ3:[{name:"high",label:"high",range:[1,20],normalize:0,default:5},{name:"mid",label:"mid",range:[1,20],normalize:0,default:5},{name:"low",label:"low",range:[1,20],normalize:0,default:5}],normalizers:[function(e){return e},function(e){return e/10},function(e){return 1==e?"16n":2==e?"8n":3==e?"4n":void 0}]},w=(a(63),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).update=function(e){console.log(e.target.value);var t=C.normalizers[e.target.dataset.normalize](e.target.value);s.props.change(s.props.effect.id,e.target.name,t),s.setState(Object(i.a)({},e.target.name,e.target.value)),s.rangeRef.current.style.boxShadow="10px 10px 90px ".concat(s.state[e.target.name],"px #ff4a4a !important;"),console.log("shaodow: ")},s.changeGlow=function(e){},s.state={},s.style={backgroundColor:"red"},s.rangeRef=r.a.createRef(),s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e={};C[this.props.effect.type].forEach((function(t){e[t.name]=t.default})),this.setState(Object(u.a)({},e))}},{key:"render",value:function(){var e=this,t={color:"blue !important"};return Object(s.jsx)(O.a,{children:Object(s.jsxs)("div",{className:"pedal",children:[Object(s.jsx)("h3",{className:"pedal__heading",children:this.props.effect.type}),C[this.props.effect.type].map((function(a){return Object(s.jsxs)("div",{className:"pedal__range-wrap",children:[Object(s.jsx)("label",{htmlFor:a.name,children:a.label}),Object(s.jsx)("input",{type:"range",ref:e.rangeRef,style:t,"data-normalize":a.normalize,value:e.state[a.name],onChange:e.update,name:a.name,min:a.range[0],max:a.range[1]})]})}))]})})}}]),a}(n.Component)),k=a(81),N=a.p+"static/media/x.c7bd7f24.svg",_=a(26),E=a.n(_);function S(e,t){var a={};return e.forEach((function(e){a[e]=[];for(var s=1;s<=t;s++)a[e].push(0)})),a}var U=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).getLayers=function(){return s.state.layers},s.updateEffect=function(e,t,a){var n=Object(o.a)(s.state.effectsObjects),r=n.find((function(t){return t.id===e}));r.node.set(Object(i.a)({},t,a)),console.log("NEW NODE VAL: ",r.node.get(t)),s.setState(Object(u.a)(Object(u.a)({},s.state),{},{effectsObjects:n}),(function(){var e;(e=s.state.sound).chain.apply(e,Object(o.a)(s.state.effects).concat([s.state.volumeNode]))}))},s.setVolume=function(e){s.setState(Object(u.a)(Object(u.a)({},s.state),{},{volume:e.target.value})),s.state.volumeNode.set({volume:e.target.value})},s.makeTone=function(e){return new f.Sampler({urls:e.urls,baseUrl:e.baseUrl,onload:function(){console.log("LOADED")}}).connect(s.state.volumeNode)},s.placeBeat=function(e,t){var a=Object(o.a)(s.state.layers[e]);0===a[t]?a[t]=1:a[t]=0,s.setState({layers:Object(u.a)(Object(u.a)({},s.state.layers),{},Object(i.a)({},e,a))})},s.state={length:s.props.length,layers:{},volume:-12,volumeNode:new f.Volume,effectsObjects:[],effectsChain:[]},s}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.setState(Object(u.a)(Object(u.a)({},this.state),{},{layers:this.props.layers,sound:this.makeTone(this.props.inst.tone)})),this.state.volumeNode.set({volume:this.state.volume}).toDestination()}},{key:"addEffect",value:function(e,t){var a=this,s=Object(o.a)(this.state.effectsObjects);s.push({node:Object(j.a)(f[e],Object(o.a)(t)),type:e,id:Object(k.a)()}),this.setState(Object(u.a)(Object(u.a)({},this.state),{},{effectsObjects:s,effects:s.map((function(e){return e.node}))}),(function(){var e;(e=a.state.sound).chain.apply(e,Object(o.a)(a.state.effects).concat([a.state.volumeNode]))}))}},{key:"go",value:function(){for(var e in this.state.layers)if(this.state.layers[e][this.props.step]){var t=f.now();this.state.sound.triggerAttackRelease([e],"8n.",t)}}},{key:"cleanUp",value:function(){this.state.sound.dispose(),this.state.effects&&this.state.effects.forEach((function(e){return e.dispose()}))}},{key:"renderRows",value:function(){var e=[];for(var t in this.state.layers)e.push([t].concat(Object(o.a)(this.state.layers[t])));return e}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"instrument",children:[Object(s.jsx)("img",{src:N,className:"instrument__remove-btn",onClick:function(){e.cleanUp(),e.props.remove(e.props.index)}}),Object(s.jsx)("h3",{className:"instrument__name",children:this.props.inst.name}),Object(s.jsxs)("div",{className:"instrument__volume-wrap",children:[Object(s.jsx)("label",{htmlFor:"volume",children:" volume "}),Object(s.jsx)("input",{orient:"vertical",className:"instrument__volume",name:"volume",style:{width:"400px"},type:"range",min:"-55",max:"20",onChange:function(t){return e.setVolume(t)},value:this.state.gain})]}),Object(s.jsxs)("div",{className:"instrument__wrap",children:[this.renderRows().reverse().map((function(t){return Object(s.jsx)(x,{placeBeat:e.placeBeat,tone:t[0],layer:t.filter((function(e){return"string"!==typeof e}))})})),Object(s.jsx)("div",{className:"instrument__wrap",children:Object(s.jsxs)("div",{className:"instrument__effect-rack",children:[Object(s.jsx)(E.a,{trigger:"Effects:",easing:"cubic-bezier(1, 2, 0.6, 0.7)",triggerStyle:{cursor:"pointer"},children:Object(s.jsxs)("div",{className:"instruments__button-wrap",children:[Object(s.jsx)("span",{className:"instrument__effect-btn",onClick:function(){return e.addEffect("Reverb",[10])},children:"reverb"}),Object(s.jsx)("span",{className:"instrument__effect-btn",onClick:function(){return e.addEffect("Distortion",[.5])},children:"distortion"}),Object(s.jsx)("span",{className:"instrument__effect-btn",onClick:function(){return e.addEffect("FeedbackDelay",["16n",.5])},children:"feedback delay"}),Object(s.jsx)("span",{className:"instrument__effect-btn",onClick:function(){return e.addEffect("Vibrato",[1,1])},children:"vibrato"}),Object(s.jsx)("span",{className:"instrument__effect-btn",onClick:function(){return e.addEffect("JCReverb",[.5])},children:"room reverb"}),Object(s.jsx)("span",{className:"instrument__effect-btn",onClick:function(){return e.addEffect("EQ3",[3,3,3])},children:"EQ3"})]})}),Object(s.jsx)("div",{className:"instrument__pedals",children:this.state.effectsObjects.map((function(t){return Object(s.jsx)(w,{change:function(t,a,s){return e.updateEffect(t,a,s)},effect:t},t.id)}))})]})})]})]})}}]),a}(n.Component),A={notes:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B","C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],scales:{chromatic:[1,1,1,1,1,1,1,1,1,1,1,1],major:[2,2,1,2,2,2],minor:[2,1,2,2,1,2]},getScale:function(e,t,a){var s=this,n=e.toUpperCase(),r=[];r.push(n+a);var c=this.notes.indexOf(n),l=!1;return this.scales[t].forEach((function(e){c>=10&&!l&&(l=!0,a++),c>=s.notes.length-1?c=0+e:c+=e,r.push(s.notes[c]+a)})),r}},z=(a.p,a.p,a(37),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(m.a)(this,a);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={key:"C",scale:"major",octave:"3",range:1,expanded:!1},e.expand=function(){e.setState(Object(u.a)(Object(u.a)({},e.state),{},{expanded:!e.state.expanded}))},e.handleChange=function(t){e.setState(Object(u.a)(Object(u.a)({},e.state),{},Object(i.a)({},t.target.name,t.target.value))),console.log(e.state[t.target.name])},e.makeInst=function(t,a,s,n,r,c){for(var l=[],i=0;i<n;i++)l=[].concat(Object(o.a)(l),Object(o.a)(A.getScale(t,a,Number(s)+i))),console.log(l);e.props.addInst({keys:l,tone:r,type:c})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return Object(s.jsx)(E.a,{trigger:this.props.inst.name,triggerStyle:{color:"#ff4a4a",fontSize:"20px",cursor:"pointer"},easing:"ease-in-out",className:"inst",children:Object(s.jsx)("div",{className:"inst",children:Object(s.jsxs)("div",{className:"inst__wrapper",children:[Object(s.jsx)("label",{className:"inst__form-label",htmlFor:"key",children:"Key:"}),Object(s.jsx)("input",{className:"inst__input",name:"key",onChange:function(t){return e.handleChange(t)},type:"text",value:this.state.key}),Object(s.jsx)("label",{className:"inst__form-label",htmlFor:"scale",children:"Scale:"}),Object(s.jsxs)("select",{className:"inst__select",onChange:function(t){return e.handleChange(t)},value:this.state.scale,name:"scale",id:"cars",children:[Object(s.jsx)("option",{value:"chromatic",children:"chromatic"}),Object(s.jsx)("option",{value:"major",children:"major"}),Object(s.jsx)("option",{value:"minor",children:"minor"})]}),Object(s.jsx)("label",{className:"inst__form-label",htmlFor:"key",children:"octave"}),Object(s.jsx)("input",{className:"inst__input",name:"octave",onChange:function(t){return e.handleChange(t)},value:this.state.octave,type:"number"}),Object(s.jsx)("label",{className:"inst__form-label",htmlFor:"range",children:"range"}),Object(s.jsx)("input",{className:"inst__input",name:"range",onChange:function(t){return e.handleChange(t)},value:this.state.range,type:"number"}),Object(s.jsx)("span",{className:"inst_btn-wrap",children:Object(s.jsx)("button",{className:"inst__btn",onClick:function(){return e.makeInst(e.state.key,e.state.scale,e.state.octave,e.state.range,{urls:e.props.inst.urls,baseUrl:e.props.inst.baseUrl,name:e.props.inst.name},e.props.inst.type)},children:"ADD"})})]})})})}}]),a}(n.Component)),D=(a(64),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"makeSounds",value:function(){var e={},t=[];return this.props.kit.sounds.forEach((function(a){e[a.name]=new f.Player(a.url).toDestination(),t.push(a.name)})),{sounds:e,keys:t}}},{key:"render",value:function(){var e=this;return Object(s.jsx)("h3",{className:"inst__name",onClick:function(){return e.props.addKit(e.makeSounds())},children:this.props.kit.name})}}]),a}(n.Component)),B={x:null,y:null,dragging:!1};document.addEventListener("mousedown",(function(e){B.dragging=!0})),document.addEventListener("mouseup",(function(e){B.dragging=!1})),document.addEventListener("mousemove",(function(e){B.x=e.clientX,B.y=e.clientY}));function K(e){return Object(s.jsxs)("div",{className:"instrument-select",children:[Object(s.jsx)("h1",{children:"Instruments:"}),e.instruments.map((function(t){return Object(s.jsx)(z,{inst:t,addInst:e.addInst})})),Object(s.jsx)("h1",{children:"Drumkits:"}),e.drumKits.map((function(t){return Object(s.jsx)(D,{kit:t,addKit:e.addKit})}))]})}var F=a.p+"static/media/play-btn.c80694b7.svg",P=a.p+"static/media/down-arrow-light.537dc72d.svg",R=a.p+"static/media/up-arrow-light.fee76e30.svg",G=a.p+"static/media/pause-btn.2b3135b9.svg",Q="data:image/png;base64,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",I={inst:[{name:"rhodes",baseUrl:"http://localhost:3000/samples/rhodes/",urls:{C1:"US_Rhodes_C1.wav",C2:"US_Rhodes_C2.wav",C3:"US_Rhodes_C3.wav",C4:"US_Rhodes_C4.wav"},type:"sampler"},{name:"rhodes2",baseUrl:"http://localhost:3000/samples/rhodes/",urls:{C1:"US_Rhodes_C1.wav",C2:"US_Rhodes_C2.wav",C3:"US_Rhodes_C3.wav",C4:"US_Rhodes_C4.wav"},type:"sampler"},{name:"synth",baseUrl:"http://localhost:3000/samples/synth/",urls:{"A#1":"Asharp1.wav",C1:"C1.wav","D#2":"Dsharp2.wav","G#2":"Gsharp2.wav"},type:"sampler"},{name:"digi-synth",baseUrl:"http://localhost:3000/samples/digi-synth/",urls:{C3:"DigiMass_C3.wav"},type:"sampler"},{name:"cello",baseUrl:"http://localhost:3000/samples/cello/",urls:{C1:"Cello-C1.wav",C2:"Cello-C2.wav",C3:"Cello-C3.wav",C4:"Cello-C4.wav"},type:"sampler"},{name:"Acid Synth",baseUrl:"http://localhost:3000/samples/acid-synth/",urls:{C1:"c1.wav",C2:"c2.wav",C3:"c3.wav"},type:"sampler"},{name:"Elkaph Synth",baseUrl:"http://localhost:3000/samples/elkaph-synth/",urls:{C2:"ElkaC2.wav",C3:"ElkaC3.wav",C4:"ElkaC4.wav"},type:"sampler"},{name:"Female choir",baseUrl:"http://localhost:3000/samples/female-choir/",urls:{C2:"Fem_C2.wav",C3:"Fem_C3.wav",C4:"Fem_C4.wav"},type:"sampler"},{name:"Breathy Female Vocals",baseUrl:"http://localhost:3000/samples/female-breathy/",urls:{E3:"Aah-E.wav"},type:"sampler"},{name:"Guitar",baseUrl:"http://localhost:3000/samples/guitar/",urls:{D2:"D2.wav",D4:"D4.wav",E1:"E1.wav",E3:"E3.wav"},type:"sampler"},{name:"Harmonic Synth",baseUrl:"http://localhost:3000/samples/harm-synth/",urls:{C1:"C1.wav",C2:"C2.wav",C3:"C3.wav",C4:"C4.wav",C5:"C5.wav"},type:"sampler"},{name:"Hard Synth Bass",baseUrl:"http://localhost:3000/samples/hard-res-synth-bass/",urls:{C1:"C1.wav",C2:"C2.wav",E1:"E1.wav"},type:"sampler"},{name:"Must Destroy You Bass",baseUrl:"http://localhost:3000/samples/must-destroy-you-bass-1/",urls:{C1:"C1.wav"},type:"sampler"},{name:"Slap Bass",baseUrl:"http://localhost:3000/samples/slap-bass/",urls:{E1:"slap-E1.wav",E2:"slap-E2.wav",E3:"slap-E3.wav"},type:"sampler"},{name:"Square Bass",baseUrl:"http://localhost:3000/samples/square-bass/",urls:{A2:"A2.wav",C2:"C2.wav",C3:"C3.wav",B4:"B4.wav"},type:"sampler"},{name:"Synth Bass",baseUrl:"http://localhost:3000/samples/synthbass/",urls:{C1:"C1.wav",C2:"C2.wav",E1:"E1.wav"},type:"sampler"}],kit:[{name:"kitOne",sounds:[{name:"kick",url:"http://localhost:3000/samples/percussion/analog/KICK1.wav"},{name:"snare",url:"http://localhost:3000/samples/percussion/analog/SNARE1.wav"},{name:"hat",url:"http://localhost:3000/samples/percussion/analog/HHCL.wav"},{name:"hh-open",url:"http://localhost:3000/samples/percussion/analog/HHOP.wav"}]}]},M=(a(65),a(72),a(73),function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).placeBeat=function(e,t){var a=Object(o.a)(s.state.layers[e]);0===a[t]?a[t]=1:a[t]=0,s.setState({layers:Object(u.a)(Object(u.a)({},s.state.layers),{},Object(i.a)({},e,a))})},s.state={sounds:{},layers:[]},s}return Object(h.a)(a,[{key:"changeLength",value:function(e){var t=this.state.length;this.setState(Object(u.a)(Object(u.a)({},this.state),{},{length:e}));var a={};for(var s in this.state.layers){a[s]=this.state.layers[s];for(var n=0;n<e-t;n++)a[s].push(0)}this.setState(Object(u.a)(Object(u.a)({},this.state),{},{layers:a}))}},{key:"componentDidMount",value:function(){this.setState(Object(u.a)(Object(u.a)({},this.state),{},{layers:this.props.layers,sounds:this.props.kit}))}},{key:"go",value:function(){for(var e in this.state.layers)if(this.state.layers[e][this.props.step]){var t=f.now();console.log(this.state.sounds[e]),this.state.sounds[e].start(t)}}},{key:"renderRows",value:function(){var e=[];for(var t in this.state.layers)e.push([t].concat(Object(o.a)(this.state.layers[t])));return e}},{key:"render",value:function(){var e=this;return this.renderRows(),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"instrument",children:[Object(s.jsx)("img",{src:N,className:"instrument__remove-btn",onClick:function(){return e.props.remove(e.props.index)}}),this.renderRows().reverse().map((function(t){return Object(s.jsx)(x,{placeBeat:e.placeBeat,tone:t[0],layer:t.filter((function(e){return"string"!==typeof e}))})}))]})})}}]),a}(n.Component)),H=(n.Component,a(74),a.p,a(36));a(78);H.a.initializeApp({apiKey:"AIzaSyA1hcBBf0n3mPCSdTEoHdbptPe9dwmUN-g",authDomain:"bitbeat-11ad2.firebaseapp.com",projectId:"bitbeat-11ad2",storageBucket:"bitbeat-11ad2.appspot.com",messagingSenderId:"702992864567",appId:"1:702992864567:web:5399265ca35d3dd045b6b2",measurementId:"G-7VXP9PE1LC"});var L=H.a,T=(a(10),L.firestore()),V=r.a.createContext(),W=function(e){Object(d.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(m.a)(this,a),(s=t.call(this,e)).start=function(e,t){f.Transport.bpm.value=t,f.Transport.swing=1;var a=f.Transport.scheduleRepeat((function(t){e.incrementStep(),e.state.instruments.forEach((function(e){e.ref.current.go()}))}),"8n");s.setState(Object(u.a)(Object(u.a)({},s.state),{},{playing:!0,bpm:t,clear:a})),f.start(),f.Transport.start()},s.stop=function(){f.Transport.clear(s.state.clear).stop(),s.setState(Object(u.a)(Object(u.a)({},s.state),{},{playing:!1}))},s.addInstrument=function(e){var t={ref:r.a.createRef(),layers:S(e.keys,s.state.length),tone:e.tone,sounds:e.sounds,type:e.type,name:e.tone.name,role:"inst",id:Object(k.a)()};s.setState(Object(u.a)(Object(u.a)({},s.state),{},{instruments:[].concat(Object(o.a)(s.state.instruments),[t])}))},s.removeInstrument=function(e){console.log("i: ",e);var t=Object(o.a)(s.state.instruments);console.log("new inst arry ",Object(o.a)(t)),t.splice(e,1),s.setState(Object(u.a)(Object(u.a)({},s.state),{},{instruments:s.state.instruments.filter((function(t,a){return a!==e}))}))},s.incrementStep=function(){s.setState(Object(u.a)(Object(u.a)({},s.state),{},{step:s.state.step===s.state.length-1?0:s.state.step+1}))},s.changeValue=function(e){s.setState(Object(u.a)(Object(u.a)({},s.state),{},Object(i.a)({},e.target.name,e.target.value))),"bpm"===e.target.name&&(s.stop(),s.start(Object(p.a)(s),e.target.value))},s.setLength=function(e){console.log("running length"),s.setState(Object(u.a)(Object(u.a)({},s.state),{},{length:e}))},s.saveBeat=function(){var e=s.state.instruments.map((function(e){return{layers:e.ref.current.getLayers(),tone:e.tone,role:e.role,sounds:e.sounds||0,type:e.type}}));console.log(e),T.collection("beats").doc("LASTBEAT").set({bpm:s.state.bpm,length:s.state.length,instruments:e}).then((function(){return console.log("doc written ok")}))},s.getBeats=function(e){var t=[];T.collection("beats").get().then((function(a){a.forEach((function(e){var a=e.data();a.instruments&&(a.instruments.forEach((function(e){e.ref=r.a.createRef(),e.id=Object(k.a)()})),t.push(a))})),console.log(e),e.setState(Object(u.a)(Object(u.a)({},e.state),{},{bpm:t[1].bpm,length:t[1].length,instruments:t[1].instruments}))})).catch((function(e){console.log("Error getting documents: ",e)}))},s.state={ready:!1,lengthMenuExpand:!1,playing:!1,length:16,bpm:90,step:-1,instruments:[],instOptions:I.inst,kitOptions:I.kit},s}return Object(h.a)(a,[{key:"addDrumKit",value:function(e){var t={ref:r.a.createRef(),layers:S(e.keys,this.state.length),sounds:e.sounds,role:"kit",id:Object(k.a)()};this.setState(Object(u.a)(Object(u.a)({},this.state),{},{instruments:[].concat(Object(o.a)(this.state.instruments),[t])}))}},{key:"setExpanded",value:function(){this.setState(Object(u.a)(Object(u.a)({},this.state),{},{lengthMenuExpanded:!this.state.lengthMenuExpand}))}},{key:"setReady",value:function(){this.setState(Object(u.a)(Object(u.a)({},this.state),{},{ready:!0}))}},{key:"render",value:function(){var e=this;return this.state.ready?Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)(K,{instruments:this.state.instOptions,drumKits:this.state.kitOptions,addInst:function(t){return e.addInstrument(t)},addKit:function(t){return e.addDrumKit(t)}}),Object(s.jsxs)("div",{className:"main",children:[Object(s.jsx)("img",{src:Q,className:"logo",alt:""}),Object(s.jsx)(V.Provider,{value:{step:this.state.step},children:Object(s.jsxs)("div",{className:"instruments",children:[this.state.instruments.length<1&&Object(s.jsx)("h1",{className:"instruments__heading",children:"Add an instrument to get started"}),Object(o.a)(this.state.instruments).map((function(t,a){return"inst"===t.role?Object(s.jsx)(U,{step:e.state.step,inst:t,length:e.state.length,index:a,layers:t.layers,ref:t.ref,remove:e.removeInstrument},t.id):"kit"===t.role?Object(s.jsx)(M,{step:e.state.step,kit:t.sounds,length:e.state.length,index:a,layers:t.layers,ref:t.ref,remove:e.removeInstrument},t.id):void 0}))]})})]}),Object(s.jsxs)("div",{className:"controls__wrap",children:[Object(s.jsx)("button",{className:"setup__play-button",onClick:function(){e.state.playing||e.start(e,e.state.bpm),e.state.playing&&e.stop()},children:Object(s.jsx)("img",{src:this.state.playing?G:F,alt:"",className:"setup__play-icon"})}),Object(s.jsxs)("div",{className:"controls__bpm-wrap",children:["BPM: ",this.state.bpm,Object(s.jsx)("input",{className:"transport__bpm",type:"range",name:"bpm",min:"60",max:"250",onChange:function(t){return e.changeValue(t)},value:this.state.bpm})]})]})]}):Object(s.jsxs)("div",{className:"main",children:[Object(s.jsx)("img",{src:Q,className:"logo",alt:""}),Object(s.jsxs)("div",{className:"length-select",children:["Select a length to start a beat",Object(s.jsxs)(E.a,{className:"length-select__list",trigger:Object(s.jsxs)("div",{className:"length-select__btn-wrap",children:[Object(s.jsxs)("div",{className:"length-select__btn",onClick:function(){return e.setExpanded()},children:["Select a length",Object(s.jsx)("img",{className:"length-select__arrow",src:this.state.lengthMenuExpand?R:P,alt:""})]}),Object(s.jsxs)("span",{className:"length-select__current",children:[" ",this.state.length," beats"]})]}),easing:"ease-in-out",children:[Object(s.jsx)("div",{onClick:function(){return e.setLength(4)},className:"length-select__option",value:"4",children:"4 beats"}),Object(s.jsx)("div",{onClick:function(){return e.setLength(8)},className:"length-select__option",value:"8",children:"8 beats"}),Object(s.jsx)("div",{onClick:function(){return e.setLength(16)},className:"length-select__option",value:"16",children:"16 beats"}),Object(s.jsx)("div",{onClick:function(){return e.setLength(32)},className:"length-select__option",value:"32",children:"32 beats"})]}),Object(s.jsx)("button",{className:"length-select__start",onClick:function(){return e.setReady()},children:"+ start new beat"})]})]})}}]),a}(n.Component);a(79);var X=function(){return Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(W,{})})};l.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(X,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.41b38243.chunk.js.map